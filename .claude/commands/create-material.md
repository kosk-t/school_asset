# 教材作成コマンド

引数: $ARGUMENTS

## 指示

**⚠️ 最初に必ず実行してください**:
```bash
node scripts/list-stories.js
```
既存ストーリーの一覧が表示されます。**既存のストーリーと重複しないテーマ・内容**を選んでください。

---

以下の条件で教材HTMLを作成してください。

### Jekyll構成について
このプロジェクトはJekyllを使用しています。教材ファイルは以下の構成で作成します：
- **テンプレート**: `assets/education-template.html`（Front Matter付き）
- **出力先**: `docs/<テーマ名>_教材.html`
- **メタデータ**: `docs/_data/materials.yml` に追加
- **レイアウト**: `docs/_layouts/material-raw.html` が自動適用

### 基本設定
- **テーマ**: 引数で指定（例：二次方程式の平方完成、一次方程式、比例と反比例）
- **対象**: 指定がなければ中学生・基礎〜標準レベル
- **文体**: やさしく、手順は箇条書き、数式はLaTeX
- **禁止**: 個別の長い問題解説に偏らない（"考え方の道具箱"が主）

### 必須構成（見出し順）
1. **テーマの定義**（導入 → 学ぶ内容の箇条書き）
   - まず「なぜ学ぶか」を身近な例で動機づけ（1〜2文）
   - 次に「何を学ぶか」を箇条書きで簡潔に
   - 最重要ルールや詳細な説明はここに書かない（セクション2に任せる）
2. **覚えるルール**（最重要ルール + 図解 + その他ルール）
   - 最重要ルールを `important-rule` で強調 + 理解を助けるSVG図解
   - その他必要な法則・定理・公式を `rule-box` で重要度別に
   - **公式だけでなく「だから結果がこうなる」まで書く**（例：公式を適用すると解が \\(x = ...\\) の形で求まる）
   - 必要に応じて**メリット**も追加OK：`<p><strong>✅ メリット：</strong> 説明文</p>` の形式で、その解法・公式を使う利点（速い、ミスしにくい等）を書く。
   - **公式の「考え方」を折りたたみで書く**：「なぜこの公式になるのか」を導出のヒントや直感的な理解として説明する。暗記ではなく理解を促す。邪魔にならないよう `<details>` で折りたたむ。
     ```html
     <details><summary><strong>💡 考え方を見る</strong></summary>
     <p>説明文...</p>
     </details>
     ```
3. **例題と解き方**（冒頭に1文で概要 → カテゴリごとにh3で分類 → 各例題に番号付き手順）
4. **簡単にするコツ**（例題を解く際に役立つコツ。約分・因数分解・置換など）
5. **よくあるつまづき**（注意点と対策）
6. **仕上げチェックリスト**（5項目）
7. **練習問題**（2問程度。`<details>`で答えを折りたたみにする）
8. **まとめ一言**（ワンフレーズで要点を再確認）
9. **関連教材**（Front Matterの `related` で指定。レイアウトが自動生成）
10. **おまけ：実践ストーリー「タイトル」**（学んだルールを使う具体的なシナリオ）

### 例題と解き方の作り方

**構成のポイント**:
- 複数の解法やパターンがある場合は **h3見出し「▶ カテゴリ名」** で分類
- 各例題には **番号付きリスト（ol）で手順を記載**
- 手順を独立したセクションにせず、例題の中に統合する

**例題の書き方**:
```html
<h3 style="color: #1976d2; margin: 15px 0 10px 0;">▶ カテゴリ名</h3>

<div class="example-box" id="ex-1">
    <div class="example-title">
        <span class="number-badge">例1</span>例題タイトル
    </div>
    <p>問題文（\(x^2 - 5x + 6 = 0\) を解く など）</p>
    <p><strong>解き方：</strong></p>
    <ol>
        <li>手順1の説明</li>
        <li>手順2の説明</li>
        <li>手順3の説明</li>
    </ol>
    <div class="formula">
        \[ 計算式 \]
    </div>
</div>
```

**手順の書き方のコツ**:
- 「〜する」「〜を探す」など動詞で終わる
- 条件分岐は「→」で示す（例：「定数項がない → 共通因数をくくる」）
- 重要な結果は **太字** で強調

### 実践ストーリーの作り方

教材で学んだルールを使って解決する具体的なシナリオを、物語形式で描く。

**⚠️ 最重要：雑学要素とエンタメ重視！**
- ストーリーは**「へぇー！」という驚きと雑学要素**が最優先
- 直感に反する結果、意外な事実、歴史的エピソードなど、読者が驚く内容を選ぶ
- 難しい数学的証明や複雑な計算は**絶対に入れない**
- 数式は最小限（2〜3個程度）、シンプルなものだけ
- **ストーリーとユーモアが主役、数式は脇役**
- 中学生が「へぇ〜面白い！」「知らなかった！」と思える内容に

**ストーリーの種類**:

**優先順位**:
1. **数学パラドックス・雑学** ★★★★★ - 直感に反する結果で最も驚きがある（確率、二次方程式、面積など全テーマで探す）
2. **歴史エピソード（雑学度★★★★以上）** ★★★★☆ - 実話の説得力と人間ドラマ
3. **他分野応用ストーリー** ★★★☆☆ - 数学の実用性を示す
4. **フィクションストーリー** ★★☆☆☆ - 最終手段（上記が見つからない場合のみ）

**重要：確率以外のテーマ（二次方程式、面積、平方根、一次関数など）でも、必ず雑学要素の高いストーリーを優先すること。**

#### 1. 実話ベース・他分野応用ストーリー
実際にあった歴史的エピソードや、数学を他分野（科学・経済・芸術など）に応用する題材。「本当にあった話」は説得力があり、数学が実際に役立つ証拠になる。特に**数学パラドックス・雑学（確率、二次方程式、面積など全テーマ）や雑学度の高い歴史エピソードを最優先**すること。

**目次とタイトルの書き方**:
- 数学パラドックス・雑学:
  - 確率: `おまけ：確率パラドックス「タイトル」`
  - その他: `おまけ：数学雑学「タイトル」`（例：「ピザのサイズの罠」「-40°の奇跡」）
  - h2見出し: `おまけ：確率パラドックス「タイトル」` または `おまけ：数学雑学「タイトル」`
  - story-title: 内容に応じた絵文字（🎲 🚪 🍕 🌡️ 📐 など）+ タイトル
- 歴史エピソード:
  - 目次: `おまけ：歴史ストーリー「タイトル」`
  - h2見出し: `おまけ：歴史ストーリー「タイトル」`
  - story-title: `📖 タイトル（時代・場所）`
- 他分野応用:
  - 目次: `おまけ：〇〇と数学「タイトル」`（例：科学と数学、お金と数学）
  - h2見出し: `おまけ：〇〇と数学「タイトル」`
  - story-title: `📖 タイトル`

**歴史ストーリーの鉄則**:
- **証明や導出過程は書かない**（「〜が発見された」でOK）
- 登場人物の**人間ドラマ**を描く（葛藤、驚き、怒り、喜び）
- **会話形式**を積極的に使う（「は？そんなわけないだろ！」など）
- 歴史的事実は簡潔に、**オチとユーモアに力を入れる**
- **出典を明記する**：実話・歴史エピソードの場合は、ストーリーの最後に注釈として出典を追加
  - Wikipediaリンク、史料、文献などがあれば記載
  - 例：`※この粘土板は現在、イェール大学のバビロニアコレクションに保管されています（<a href="https://ja.wikipedia.org/wiki/YBC_7289" target="_blank" style="color: #1976d2;">YBC 7289</a>）。`
  - リンクは `target="_blank"` で新しいタブで開く
  - フィクションストーリーの場合は出典不要

**使える歴史エピソード例（雑学度が高いものを優先）**:
| テーマ | エピソード | 概要 | 雑学度 |
|--------|-----------|------|--------|
| 体積 | アルキメデスの王冠問題 | 水に沈めて体積を測定、「ユーレカ！」で裸で街を走った | ★★★★★ |
| 平方根・無理数 | ピタゴラス学派の悲劇 | √2が分数で表せないと発見→学派の信条が崩壊→発見者は海に沈められた（伝説） | ★★★★★ |
| 座標平面 | デカルトとハエの伝説 | 病弱でベッドにいたデカルトが天井のハエを見て座標系を思いついた | ★★★★☆ |
| 確率 | パスカルとフェルマーの往復書簡 | 「賭けを途中でやめたら賞金をどう分ける？」問題から確率論が誕生 | ★★★☆☆ |
| 円周率 | アルキメデスの近似法 | 正96角形を使って円周率を3.14...と計算。ローマ兵に「図形を踏むな！」と叫んで殺された | ★★★★★ |
| 統計 | ナイチンゲールの統計グラフ | クリミア戦争で「病院の衛生状態が悪い」ことをグラフで証明、医療改革を実現 | ★★★☆☆ |
| ゼロの発見 | インドの数学者の革命 | 「何もない」を数で表す概念がなかった時代、ゼロの発見で計算が革命的に簡単に | ★★★★☆ |
| 負の数 | 中世ヨーロッパの拒絶 | 「マイナス×マイナス=プラス」を悪魔の仕業と呼び、長年認めなかった | ★★★★☆ |

**他分野応用の題材例**:

**数学パラドックス・雑学（全テーマ対応！）**:

**確率の雑学**:
| テーマ | 題材 | 学べること | 雑学度 |
|--------|------|-----------|--------|
| 条件付き確率 | モンティ・ホール問題 | ドアを変えると確率が2倍！博士号持ちも間違えた伝説の問題 | ★★★★★ |
| 独立事象 | ギャンブラーの誤謬 | 1913年モンテカルロで黒が26回連続！「次は赤だ！」で破産した人々 | ★★★★★ |
| 余事象 | 誕生日のパラドックス | 23人いれば50%、50人なら97%の確率で誕生日が同じ人がいる | ★★★★★ |

**二次方程式・二次関数の雑学**:
| テーマ | 題材 | 学べること | 雑学度 |
|--------|------|-----------|--------|
| 放物線 | ガリレオの砲弾実験 | 「弾道は放物線」を証明して教会と対立。望遠鏡で木星の衛星を発見した反逆者 | ★★★★★ |
| 二次方程式 | バビロニアの粘土板 | 紀元前2000年、既に二次方程式を解いていた！解の公式の4000年の歴史 | ★★★★☆ |
| 最大値・最小値 | 長方形の柵問題 | 同じ周囲の長さなら、正方形が一番広い。牧場の柵をどう張るべきか？ | ★★★☆☆ |

**面積・体積の雑学**:
| テーマ | 題材 | 学べること | 雑学度 |
|--------|------|-----------|--------|
| 体積 | アルキメデスの王冠問題 | 「ユーレカ！」で裸で街を走った天才。風呂で王冠の金の純度を見破る | ★★★★★ |
| 面積 | エジプトの縄張り師 | ナイル川の氾濫で土地の境界が消える→縄で面積を測る「測量の起源」 | ★★★★☆ |
| 円の面積 | ピザのサイズの罠 | 直径2倍のピザは面積4倍！Mサイズ2枚よりLサイズ1枚の方がお得な数学 | ★★★★☆ |

**平方根・無理数の雑学**:
| テーマ | 題材 | 学べること | 雑学度 |
|--------|------|-----------|--------|
| √2の発見 | ピタゴラス学派の悲劇 | √2が分数で表せない→学派の信条崩壊→発見者は海に沈められた（伝説） | ★★★★★ |
| 近似値 | バビロニアの√2近似 | 紀元前1800年の粘土板に1.414213...が！電卓より正確な古代の計算 | ★★★★☆ |

**一次関数・比例の雑学**:
| テーマ | 題材 | 学べること | 雑学度 |
|--------|------|-----------|--------|
| 温度変換 | 華氏と摂氏の不思議 | -40°Cと-40°Fは同じ温度！一次関数で変換できる奇跡の一致 | ★★★★☆ |
| 比例 | ガリレオの振り子 | 教会でシャンデリアの揺れを見て、周期の法則発見。時計革命の始まり | ★★★★☆ |

**科学・テクノロジー**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 二次関数・放物線 | ロケット・砲弾の軌道 | 弾道計算の歴史、ガリレオの発見 |
| 連立方程式 | GPSの仕組み | 3つの衛星から位置を特定する三角測量 |
| 素数・因数分解 | 暗号技術（RSA） | なぜ素数が「鍵」になるか |
| 指数・対数 | 地震のマグニチュード | M7はM6の32倍のエネルギー |

**経済・お金のリテラシー**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 指数関数 | 複利の力と借金の怖さ | 「72の法則」、リボ払いの罠、1円を30日間倍にすると5億円超え |
| 一次関数 | 損益分岐点 | 何個売れば黒字になるか |
| 割合・比 | 税金の仕組み | 消費税、所得税の累進課税 |
| 統計 | 平均年収のウソ | 平均値と中央値の違い、なぜ「平均年収以下」が7割なのか |
| 複利計算 | 1億円の宝くじの真の価値 | 30年後に受け取るなら現在価値は2000万円？時間とお金の関係 |

**芸術・デザイン**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 比・相似 | 黄金比とパルテノン神殿 | 1:1.618...が美しい理由 |
| 比例・分数 | 音楽と周波数 | ドとソが心地よい理由（3:2） |
| 相似 | 遠近法と消失点 | ルネサンス絵画の技法 |

**自然・生物**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 数列 | フィボナッチ数列と植物 | ひまわりの種、貝殻の螺旋、なぜ自然は数列を使うのか |
| 指数関数 | 細菌の増殖・感染症 | なぜ「指数関数的に増える」が怖いか |
| 相似・比 | 恐竜はなぜ大きくなれたか | 体積と表面積のスケール則、大きくなると冷めにくい |
| 平方根 | 巨大生物が存在できない理由 | 筋力は断面積に比例、体重は体積に比例 → ゴジラは立てない |

**スポーツ・ゲーム**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 割合・統計 | 野球の打率とOPS | データ野球の考え方 |
| 確率 | ガチャの確率計算 | 「天井」まで何円かかるか |
| 確率 | じゃんけんの必勝法？ | 統計的に出やすい手がある |

**社会・生活の知恵**:
| テーマ | 題材 | 学べること |
|--------|------|-----------|
| 比・相似 | 地図の縮尺 | なぜ1:25000が標準か |
| 正負の数 | 時差計算 | 日付変更線の不思議 |
| 比 | レシピの分量調整 | 4人分→6人分への変換 |

#### 2. フィクションストーリー（架空の話）
1に適した題材がない場合の最終手段。できるだけ1を優先すること。

- 身近な話題: ゲーム、スポーツ、お金、建築・DIY、料理、SNS・動画など
- 昔話風: 商人、農夫、職人、旅人、王様・賢者など
- 目次: `おまけ：実践ストーリー「タイトル」`
- h2見出し: `おまけ：実践ストーリー「タイトル」`
- story-title: `📖 タイトル`

---

### ストーリーの構成パターン

#### 0. 数学パラドックス・雑学の構成（最優先！全テーマ対応）

1. **問題の提示**（1〜2文）
   - 直感的に「こうだろう」と思える質問を投げかける
   - 例：「ピザのMサイズ2枚とLサイズ1枚、どっちがお得？」「-40°Cって華氏だと何度？」

2. **直感の答えと数学の答えの対比**（重要！）
   - 「普通はこう思うよね？」
   - 「でも実は...」という驚きの結果を示す
   - この「直感を裏切る」瞬間が最大の見せ場

3. **簡単な説明**（3〜5文）
   - 表や図を使ってわかりやすく
   - 数式は1〜2個だけ
   - 計算過程は最小限に

4. **実話・エピソード**（2〜3文）
   - 「博士号持ちが1000通の抗議」「バビロニアの粘土板」など、信じられない実話を追加
   - この問題の歴史的背景や有名なエピソード

5. **オチ**（1〜2文）
   - **ユーモア必須！**
   - 「直感なんてアテにならない」「数学、恐るべし」「古代人すごい」など

#### 1-A. 歴史ストーリーの構成

1. **時代背景と登場人物**（2〜3文）
   - いつ・どこで・誰が
   - その人物の状況や信念を簡潔に

2. **問題発生**（2〜3文）
   - 何が起きたか、何に気づいたか
   - 数式は1つだけ（シンプルなもの）

3. **衝撃と反応**（3〜5文）
   - 登場人物の驚き・困惑・怒りなど
   - **会話形式で感情を表現**（「は？」「マジか...」など）

4. **結末**（2〜3文）
   - 歴史的にどうなったか（伝説でもOK）

5. **オチ・教訓**（1〜2文）
   - **ユーモア必須！**
   - 現代へのツッコミ、皮肉、語呂合わせなど

#### 1-B. 他分野応用ストーリー・2. フィクションストーリーの構成

1. **状況設定**（2〜3文）
   - 登場人物と困っている問題を提示

2. **問題を数式に変換**（簡潔に）
   - 何を求めるか説明
   - 数式は1〜2個程度

3. **計算（最小限）**
   - 複雑な計算過程は省略OK
   - 結果だけ示すか、1〜2ステップで

4. **結論**（1〜2文）
   - 計算結果を元の問題に戻して解釈

5. **オチ**（1〜2文）
   - **ユーモアを必ず入れる！**
   - 登場人物の運命、皮肉な結末、ツッコミなど

**ユーモアの入れ方**:
- 登場人物の行動にツッコミを入れる（「裸で街を走るとは...天才と変人は紙一重」）
- 結末を想像に任せる（「その後どうなったかは...古代の王様を怒らせるとロクなことにならない」）
- 現代との比較（「今なら即SNSで炎上案件」）
- 自虐・皮肉（「利益計算を間違えていることに後から気づくのであった」）

**トーン**:
- カジュアル、話し言葉OK
- 歴史ストーリーでも堅くなりすぎない
- 「〜という伝説がある」「〜と言われている」で史実の曖昧さを回避

**分量目安**:
- 全体で300〜500字程度（数式除く）

### ルールと計算例のリンク
- 各計算例には `id` 属性を付与（例: `id="ex-basic"`）
- ルールの見出しに対応する計算例へのリンクを追加
- リンクには `class="example-link"` を使用

```html
<!-- 計算例にidを付ける -->
<div class="example-box" id="ex-factoring">
    <div class="example-title">
        <span class="number-badge">例1</span>因数分解で解く
    </div>
    ...
</div>

<!-- ルールからリンクする -->
<div class="rule-box">
    <strong>📌 因数分解のパターン</strong> <a href="#ex-factoring" class="example-link">→ 例1</a>
    ...
</div>
```

### 数式の記法
- インライン: `\(` `\)`
- ディスプレイ: `\[` `\]`

### 数学記号の読み方・意味の補足（必須）
初めて登場する数学記号には、**読み方を括弧で補足**すること。中学生が「何これ？」とならないように。

**読み方の書き方例**：
```html
<p>\(A \cap B\)（「AかつB」と読む。AとBの両方が起こること）</p>
<p>\(A \cup B\)（「AまたはB」と読む。AとBの少なくとも一方が起こること）</p>
<p>\(\overline{A}\)（「Aバー」と読む。Aが起こらないこと）</p>
<p>\(P(A|B)\)（「Bが起きたときのAの確率」と読む）</p>
```

**よく使う記号の読み方一覧**：
| 記号 | 読み方 | 意味 |
|------|--------|------|
| ∩ | かつ、キャップ | 両方とも起こる |
| ∪ | または、カップ | 少なくとも一方が起こる |
| Ā（上に棒） | Aバー | Aが起こらない（余事象） |
| ⊂ | 含まれる | 部分集合 |
| ∈ | 属する | 要素である |
| ≠ | ノットイコール | 等しくない |
| ≤, ≥ | 以下、以上 | 〜より小さいか等しい |
| ± | プラスマイナス | 正または負 |
| √ | ルート | 平方根 |

### 抽象的な概念には具体例を必ず添える
「〜とは」だけで終わらず、**「たとえば〜」で具体的な状況を説明**すること。

**悪い例**：
```html
<p>排反事象とは、同時に起こらない事象のことです。</p>
```

**良い例**：
```html
<p><strong>排反事象</strong>とは、同時に起こらない事象のこと。</p>
<p>たとえば、サイコロを1回振るとき「1が出る」と「2が出る」は排反事象です。
1回のサイコロで1と2が同時に出ることはありえないからです。</p>
<p>一方、「偶数が出る」と「4が出る」は排反ではありません。
4が出れば「偶数も出た」ことになり、同時に成り立つからです。</p>
```

**具体例が必要な概念の例**：
- 排反事象 → サイコロで「1が出る」と「2が出る」は同時に起こらない
- 独立事象 → サイコロを2回振るとき、1回目の結果は2回目に影響しない
- 条件付き確率 → 袋から赤玉を引いたとき、それが大きい玉である確率
- 余事象 → 「少なくとも1回当たる」の余事象は「1回も当たらない」
- 全事象 → サイコロなら{1,2,3,4,5,6}の6通りすべて

### テーブル
公式まとめなどでテーブルを使う場合は `material-table` クラスを使用：

```html
<table class="material-table">
    <tr>
        <th>見出し1</th>
        <th>見出し2</th>
        <th>見出し3</th>
    </tr>
    <tr>
        <td>データ1</td>
        <td>\(公式\)</td>
        <td>説明</td>
    </tr>
</table>
```

- インラインスタイルは使わない（共通CSSで定義済み）
- レスポンシブ対応済み

### 関連教材（Front Matterで指定）
前提知識や関連する教材がある場合は、**Front Matterの `related` で指定**します。
レイアウトが自動で関連教材セクションを生成するため、**本文にHTMLを書く必要はありません**。

```yaml
related:
  - url: /前提教材_教材.html
    title: 前提教材名
    note: なぜこの教材が前提なのかを一言で
    type: prerequisite
  - url: /関連教材_教材.html
    title: 関連教材名
    note: どう関連しているのかを一言で
    type: related
```

- `url`: 教材へのパス（`/` で始める）
- `title`: 教材名
- `note`: 関連理由の説明（簡潔に15字程度で）
- `type`: `prerequisite`（前提知識）または `related`（関連教材）
- 該当する教材がない場合は `related` ごと省略してOK
- `curriculum.json` の `prerequisite` / `relatedTo` と整合性を取る

**関連教材の決め方**:
1. `assets/curriculum.json` の `materials` セクションを参照し、既存の教材一覧を確認
2. 既存の教材名から前提知識・関連教材を選ぶ
3. **存在しない教材へのリンクは絶対に作らない**（架空の教材名を推測で書かない）
4. **関連理由を必ず書く**（学習者が「なぜこれを学ぶべきか」を理解できるように）

### SVG図解
- 理解を助けるSVG図解を適切に追加
- 既存教材 `docs/データの分析と確率_教材.html` を参考に
- 要素が重ならないよう座標に注意
- **必ず `svg-caption` をつける**（図番号が自動付与される）
- **SVG内ではLaTeX記法（`\(` `\)`）は使用不可**（KaTeXがレンダリングされない）
  - 数式はUnicode文字を使う：`²` `³` `⁴` `⁵`（上付き）、`√` `×` `÷` `±` `−`
  - 例：`\( 2^3 \)` → `2³`、`\( \sqrt{9} \)` → `√9`
- **矢印マーカーは常に同じ形状を使う**（`orient="auto"` がパス方向に自動回転する）
  ```html
  <!-- 矢印の定義（色だけ変える、形状は全て同じ） -->
  <defs>
      <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
          <polygon points="0 0, 10 3, 0 6" fill="#4caf50"/>
      </marker>
      <marker id="arrow-purple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
          <polygon points="0 0, 10 3, 0 6" fill="#9c27b0"/>
      </marker>
  </defs>
  <!-- パスの向きで矢印の向きが決まる -->
  <path d="M 100 50 L 200 50" marker-end="url(#arrow-green)"/>  <!-- 右向き -->
  <path d="M 200 80 L 100 80" marker-end="url(#arrow-purple)"/> <!-- 左向き -->
  <path d="M 150 100 L 150 150" marker-end="url(#arrow-green)"/> <!-- 下向き -->
  ```
- **放物線などの曲線を描く場合の注意**
  - ⚠️ **SVGのy座標系：y座標が大きいほど下**
    - 画面上部：y座標が小さい（例：y=50）
    - 画面下部：y座標が大きい（例：y=200）
    - **下に凸（∪型）**：頂点のy座標 > 両端のy座標（頂点が下）
    - **上に凸（∩型）**：頂点のy座標 < 両端のy座標（頂点が上）
  - **✅ 推奨方法：数式から複数の点を計算して `L` コマンドで繋ぐ**
    - 直感的で正確、どんな曲線でも対応可能
    - 点を細かく取れば滑らかな曲線になる
  - **描き方の手順**：
    1. 座標変換を決める（例：`SVG_x = 70 + x*45`, `SVG_y = 250 - y*15`）
    2. 数式から複数の点を計算（0.5刻み程度で十分）
    3. `M`（始点）と `L`（線）コマンドで繋ぐ
  - 例：`y = 8 + 3x - 0.5x²` の放物線（x=0〜8）
    ```html
    <!-- 座標変換: SVG_x = 70 + x*45, SVG_y = 250 - y*15 -->
    <!-- x=0,y=8 → x=1,y=10.5 → x=2,y=12 → x=3,y=12.5(頂点) → ... → x=8,y=0 -->
    <path d="M 70 130
             L 92.5 109.4 L 115 92.5 L 137.5 79.4 L 160 70 L 182.5 64.4
             L 205 62.5
             L 227.5 64.4 L 250 70 L 272.5 79.4 L 295 92.5 L 317.5 109.4
             L 340 130 L 362.5 154.4 L 385 182.5 L 407.5 214.4 L 430 250"
          stroke="#e53935" stroke-width="3" fill="none"/>
    ```
  - ⚠️ **二次ベジェ曲線（`Q`コマンド）は非推奨**
    - 制御点の計算が複雑で間違いやすい
    - 制御点は曲線が通過する点ではないため、直感に反する
  ```html
  <div class="svg-container">
      <svg>...</svg>
      <div class="svg-caption">図の説明文</div>
  </div>
  ```

### テンプレートと出力
1. `assets/education-template.html` をベースに使用（Front Matter付き）
2. レイアウト `material-raw` が自動でhead部分（CSS, KaTeX）を挿入
3. 出力先: `docs/<テーマ名>_教材.html`

### Front Matter（必須）
ファイル先頭に以下のYAML Front Matterを含めてください：

```yaml
---
layout: material-raw
title: テーマ名
icon: "絵文字"
description: このテーマで学ぶ内容を2〜3文で説明
level: 標準
level_num: 2
category: numbers/equations/functions/geometry/data
order: カテゴリ内の表示順（1〜）
keywords:
  - キーワード1
  - キーワード2
  - キーワード3
cover_image: /images/noimage.jpg
cover_description: 表紙画像に含めたいビジュアル要素の説明
battle_game: false
toc:
  - id: section1
    title: テーマの定義
  - id: section2
    title: 覚えるルール
  # ... 以下続く
# 関連教材がある場合のみ追加（任意）
related:
  - url: /前提教材_教材.html
    title: 前提教材名
    note: なぜこの教材が前提なのか
    type: prerequisite
---
```

### カテゴリID
- `numbers`: 数と式（正負の数、文字式、式の展開、因数分解など）
- `equations`: 方程式（一次方程式、連立方程式、二次方程式など）
- `functions`: 関数（比例・反比例、一次関数、二次関数など）
- `geometry`: 図形（平面図形、空間図形、合同、相似、三平方の定理など）
- `data`: データの活用（度数分布、代表値、確率など）

### 目次ページへの追加（自動生成）
`docs/index.html` はLiquidテンプレートで自動生成されます。
**手動でindex.htmlを編集する必要はありません。**

代わりに `docs/_data/materials.yml` に教材情報を追加してください：

```yaml
- slug: テーマ名_教材
  title: テーマ名
  icon: "絵文字"
  description: 簡潔な説明（キーワード3つ程度）
  level: 標準
  level_num: 2
  category: equations
  order: 1
  cover_image: images/noimage.jpg
```

**levelとlevel_numの対応**:
- `level_num: 1` / `level: 基礎`
- `level_num: 2` / `level: 標準`
- `level_num: 3` / `level: 発展`

### カリキュラムマップへの追加
教材作成後、`assets/curriculum.json` の `materials` セクションに教材情報を追加してください。

**追加するJSON形式**:
```json
"<テーマ名>": {
  "file": "<テーマ名>_教材.html",
  "category": "方程式",
  "level": "standard",
  "description": "簡潔な説明文",
  "covers": [
    "中1/方程式/一次方程式/等式の性質",
    "中1/方程式/一次方程式/一次方程式の解き方",
    "中1/方程式/一次方程式/一次方程式の利用"
  ],
  "prerequisite": ["前提となる教材名"],
  "relatedTo": ["関連する教材名"]
}
```

**各フィールドの説明**:
- `file`: HTMLファイル名
- `category`: 数と式 / 方程式 / 関数 / 図形 / データの活用
- `level`: basic / standard / advanced
- `description`: 教材の簡潔な説明
- `covers`: カバーする学習項目のパス（`学年/領域/単元/小項目` 形式）
- `prerequisite`: この教材を学ぶ前に理解しておくべき教材（任意）
- `relatedTo`: 関連する教材（内容が重なる、応用で使うなど）（任意）

**covers の決め方**:
1. `assets/curriculum.json` の `curriculum` セクションを参照
2. 教材の内容（ルール・例題）から該当する項目を選ぶ
3. パス形式で記載（例: `中3/数と式/平方根/分母の有理化`）
4. 主要な項目を5〜10個程度選ぶ（完璧でなくてOK、後で調整可能）

### Jekyllビルド
教材追加後、以下のコマンドでビルドを確認できます：
```bash
cd docs && bundle exec jekyll build
```
開発サーバーで確認：
```bash
cd docs && bundle exec jekyll serve
```

### MATERIALS.md の更新（必須）
教材作成後、必ず `documents/MATERIALS.md` を更新してください：

1. **教材の状態を更新**：⬜（未着手）→ ✅（完成）
2. **進捗サマリーの数字を更新**：完成数・未着手数・進捗率
3. **更新履歴に追記**

**進捗率の計算**：
```
進捗率 = 完成数 ÷ 合計 × 100
```

**更新例**：
```markdown
<!-- 教材の状態 -->
| 14 | 連立方程式 | ✅ | 連立方程式全般 | 加減法・代入法 |

<!-- 進捗サマリー -->
| 中2 手順教材 | 3 | 7 | 10 |
| **合計** | **15** | **30** | **45** |
**進捗率: 33%**

<!-- 更新履歴 -->
| 2025-12-07 | 連立方程式✅ 完成。進捗率33%に |
```
