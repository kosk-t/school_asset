---
layout: material-raw
title: データの分析
icon: "📊"
description: データの散らばりを数値化する分散・標準偏差と、2つのデータの関係を表す相関係数を学ぶ。統計的な見方を身につけよう。
level: 標準
level_num: 2
category: data
school_level: senior
order: 1
keywords:
  - 分散
  - 標準偏差
  - 相関係数
  - 散布図
  - データの分析
cover_image: /images/noimage.jpg
cover_description: 散布図と相関係数、分散・標準偏差の計算過程
battle_game: false
toc:
  - id: section1
    title: "テーマの定義"
  - id: section2
    title: "覚えるルール"
  - id: section3
    title: "例題と解き方"
  - id: section4
    title: "簡単にするコツ"
  - id: section5
    title: "よくあるつまづき"
  - id: section6
    title: "仕上げチェックリスト"
  - id: section7
    title: "練習問題"
  - id: story
    title: "おまけ：数学雑学「平均年収のウソ」"
related:
  - url: /junior/データの分析と確率_教材.html
    title: データの分析と確率
    note: 代表値・四分位数の基礎
    type: prerequisite
---
<!-- ========== 1. テーマの定義 ========== -->
<section id="section1">
    <h2>1. テーマの定義</h2>
    <div class="section">
        <p>「テストの平均点は同じなのに、クラスによってバラつきが違う」「身長と体重には関係があるの？」——データの<strong>散らばり</strong>や<strong>関係性</strong>を数値で表すのが統計の力です。</p>

        <p>このページでは、<strong>データの分析</strong>を学びます：</p>

        <ul>
            <li><strong>分散と標準偏差</strong>：データが平均からどれだけ散らばっているかを表す数値</li>
            <li><strong>共分散と相関係数</strong>：2つのデータの関係の強さを表す数値</li>
            <li><strong>散布図</strong>：2つのデータの関係を視覚化するグラフ</li>
        </ul>
    </div>
</section>

<!-- ========== 2. 覚えるルール ========== -->
<section id="section2">
    <h2>2. 覚えるルール</h2>
    <div class="section">
        <div class="important-rule">
            🎯 最重要：分散 = 「偏差の2乗の平均」、標準偏差 = 「分散のルート」、相関係数は −1 から 1 の間！
        </div>

        <!-- 分散のイメージ図（SVG） -->
        <div class="svg-container">
            <svg width="700" height="260" viewBox="0 0 700 260">
                <!-- タイトル -->
                <text x="350" y="25" font-size="16" font-weight="bold" fill="#1976d2" text-anchor="middle">分散と標準偏差のイメージ</text>

                <!-- 数直線（上：散らばり小） -->
                <line x1="50" y1="80" x2="350" y2="80" stroke="#333" stroke-width="2"/>
                <text x="30" y="85" font-size="12" fill="#666">散らばり小</text>

                <!-- 平均の位置 -->
                <line x1="200" y1="60" x2="200" y2="100" stroke="#e53935" stroke-width="2"/>
                <text x="200" y="55" font-size="12" fill="#e53935" text-anchor="middle">平均</text>

                <!-- データ点（散らばり小） -->
                <circle cx="170" cy="80" r="6" fill="#4caf50"/>
                <circle cx="185" cy="80" r="6" fill="#4caf50"/>
                <circle cx="200" cy="80" r="6" fill="#4caf50"/>
                <circle cx="215" cy="80" r="6" fill="#4caf50"/>
                <circle cx="230" cy="80" r="6" fill="#4caf50"/>

                <!-- 数直線（下：散らばり大） -->
                <line x1="50" y1="160" x2="350" y2="160" stroke="#333" stroke-width="2"/>
                <text x="30" y="165" font-size="12" fill="#666">散らばり大</text>

                <!-- 平均の位置 -->
                <line x1="200" y1="140" x2="200" y2="180" stroke="#e53935" stroke-width="2"/>
                <text x="200" y="135" font-size="12" fill="#e53935" text-anchor="middle">平均</text>

                <!-- データ点（散らばり大） -->
                <circle cx="80" cy="160" r="6" fill="#9c27b0"/>
                <circle cx="150" cy="160" r="6" fill="#9c27b0"/>
                <circle cx="200" cy="160" r="6" fill="#9c27b0"/>
                <circle cx="270" cy="160" r="6" fill="#9c27b0"/>
                <circle cx="320" cy="160" r="6" fill="#9c27b0"/>

                <!-- 偏差の矢印 -->
                <line x1="80" y1="175" x2="200" y2="175" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)"/>
                <text x="140" y="195" font-size="11" fill="#ff9800" text-anchor="middle">偏差（大）</text>

                <line x1="170" y1="95" x2="200" y2="95" stroke="#ff9800" stroke-width="2" marker-end="url(#arrow-orange)"/>
                <text x="185" y="115" font-size="11" fill="#ff9800" text-anchor="middle">偏差（小）</text>

                <!-- 矢印マーカー定義 -->
                <defs>
                    <marker id="arrow-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#ff9800"/>
                    </marker>
                </defs>

                <!-- 説明ボックス -->
                <rect x="400" y="50" width="280" height="180" fill="#fff8e1" stroke="#ff9800" stroke-width="2" rx="10"/>

                <text x="540" y="80" font-size="14" font-weight="bold" fill="#e65100" text-anchor="middle">偏差と分散</text>

                <text x="420" y="110" font-size="13" fill="#333">偏差 = データ − 平均</text>
                <text x="420" y="135" font-size="13" fill="#333">分散 = 偏差²の平均</text>
                <text x="420" y="160" font-size="13" fill="#333">標準偏差 = √分散</text>

                <line x1="420" y1="175" x2="660" y2="175" stroke="#ccc" stroke-width="1"/>

                <text x="540" y="200" font-size="12" fill="#666" text-anchor="middle">散らばりが大きい → 分散も大きい</text>
                <text x="540" y="220" font-size="12" fill="#666" text-anchor="middle">標準偏差は元のデータと同じ単位</text>
            </svg>
            <div class="svg-caption">分散：平均からの散らばり具合を数値化する</div>
        </div>

        <div class="rule-box" id="rule-mean">
            <strong>📌 ルール1：平均値（復習）</strong>
            <div class="formula">
                \[ \bar{x} = \frac{1}{n}(x_1 + x_2 + \cdots + x_n) = \frac{1}{n}\sum_{i=1}^{n} x_i \]
            </div>
            <p>\(\bar{x}\)（「エックスバー」と読む）はデータの平均値、nはデータの個数。</p>
            <p>\(\sum\)（「シグマ」と読む）は「すべて足す」という記号。</p>
        </div>

        <div class="rule-box" id="rule-variance">
            <strong>📌 ルール2：分散（variance）</strong> <a href="#ex-variance" class="example-link">→ 例1</a>
            <div class="formula">
                \[ s^2 = \frac{1}{n}\sum_{i=1}^{n}(x_i - \bar{x})^2 = \frac{1}{n}\sum_{i=1}^{n}x_i^2 - \bar{x}^2 \]
            </div>
            <p><strong>分散</strong>（記号 \(s^2\) または \(V\)）は、データが平均からどれだけ散らばっているかを表す。</p>
            <ul>
                <li><strong>偏差</strong>（deviation）：各データと平均の差 \(x_i - \bar{x}\)</li>
                <li><strong>分散</strong>：偏差の2乗の平均</li>
            </ul>
            <p><strong>→ だから結果は：</strong> 分散が大きいほど、データは平均から離れて散らばっている</p>
            <p><strong>✅ メリット：</strong> 右辺の公式「\(\overline{x^2} - \bar{x}^2\)」（2乗の平均 − 平均の2乗）は計算が楽！</p>
            <details class="thinking"><summary>💡 考え方を見る</summary>
            <p>なぜ偏差の2乗を使うのか？</p>
            <ul>
                <li>偏差をそのまま足すと、正と負が打ち消し合って0になってしまう</li>
                <li>2乗すれば全て正になるので、散らばりを正しく測れる</li>
            </ul>
            </details>
        </div>

        <div class="rule-box" id="rule-sd">
            <strong>📌 ルール3：標準偏差（standard deviation）</strong> <a href="#ex-sd" class="example-link">→ 例1</a>
            <div class="formula">
                \[ s = \sqrt{s^2} = \sqrt{\frac{1}{n}\sum_{i=1}^{n}(x_i - \bar{x})^2} \]
            </div>
            <p><strong>標準偏差</strong>（記号 \(s\) または \(\sigma\)）は、分散の平方根。</p>
            <p><strong>→ だから結果は：</strong> 標準偏差は<strong>元のデータと同じ単位</strong>で散らばりを表す</p>
            <p><strong>✅ メリット：</strong> 分散は「点²」などになるが、標準偏差なら「点」のまま解釈できる</p>
        </div>

        <!-- 相関のイメージ図（SVG） -->
        <div class="svg-container">
            <svg width="700" height="220" viewBox="0 0 700 220">
                <!-- タイトル -->
                <text x="350" y="20" font-size="16" font-weight="bold" fill="#9c27b0" text-anchor="middle">相関係数のイメージ</text>

                <!-- 正の相関 -->
                <rect x="30" y="40" width="180" height="160" fill="#e8f5e9" stroke="#4caf50" stroke-width="1" rx="5"/>
                <text x="120" y="60" font-size="12" font-weight="bold" fill="#2e7d32" text-anchor="middle">正の相関（r ≈ 1）</text>
                <!-- 軸 -->
                <line x1="50" y1="180" x2="190" y2="180" stroke="#333" stroke-width="1"/>
                <line x1="50" y1="180" x2="50" y2="70" stroke="#333" stroke-width="1"/>
                <!-- 点（右上がり） -->
                <circle cx="60" cy="170" r="4" fill="#4caf50"/>
                <circle cx="80" cy="155" r="4" fill="#4caf50"/>
                <circle cx="100" cy="140" r="4" fill="#4caf50"/>
                <circle cx="120" cy="120" r="4" fill="#4caf50"/>
                <circle cx="140" cy="105" r="4" fill="#4caf50"/>
                <circle cx="160" cy="90" r="4" fill="#4caf50"/>
                <circle cx="180" cy="80" r="4" fill="#4caf50"/>

                <!-- 相関なし -->
                <rect x="260" y="40" width="180" height="160" fill="#fff3e0" stroke="#ff9800" stroke-width="1" rx="5"/>
                <text x="350" y="60" font-size="12" font-weight="bold" fill="#e65100" text-anchor="middle">相関なし（r ≈ 0）</text>
                <!-- 軸 -->
                <line x1="280" y1="180" x2="420" y2="180" stroke="#333" stroke-width="1"/>
                <line x1="280" y1="180" x2="280" y2="70" stroke="#333" stroke-width="1"/>
                <!-- 点（散らばり） -->
                <circle cx="290" cy="90" r="4" fill="#ff9800"/>
                <circle cx="310" cy="160" r="4" fill="#ff9800"/>
                <circle cx="330" cy="100" r="4" fill="#ff9800"/>
                <circle cx="350" cy="140" r="4" fill="#ff9800"/>
                <circle cx="370" cy="85" r="4" fill="#ff9800"/>
                <circle cx="390" cy="150" r="4" fill="#ff9800"/>
                <circle cx="410" cy="110" r="4" fill="#ff9800"/>

                <!-- 負の相関 -->
                <rect x="490" y="40" width="180" height="160" fill="#fce4ec" stroke="#e91e63" stroke-width="1" rx="5"/>
                <text x="580" y="60" font-size="12" font-weight="bold" fill="#c2185b" text-anchor="middle">負の相関（r ≈ −1）</text>
                <!-- 軸 -->
                <line x1="510" y1="180" x2="650" y2="180" stroke="#333" stroke-width="1"/>
                <line x1="510" y1="180" x2="510" y2="70" stroke="#333" stroke-width="1"/>
                <!-- 点（右下がり） -->
                <circle cx="520" cy="80" r="4" fill="#e91e63"/>
                <circle cx="540" cy="95" r="4" fill="#e91e63"/>
                <circle cx="560" cy="110" r="4" fill="#e91e63"/>
                <circle cx="580" cy="125" r="4" fill="#e91e63"/>
                <circle cx="600" cy="140" r="4" fill="#e91e63"/>
                <circle cx="620" cy="155" r="4" fill="#e91e63"/>
                <circle cx="640" cy="170" r="4" fill="#e91e63"/>
            </svg>
            <div class="svg-caption">相関係数：散布図の傾向を −1 から 1 の数値で表す</div>
        </div>

        <div class="rule-box" id="rule-cov">
            <strong>📌 ルール4：共分散（covariance）</strong> <a href="#ex-corr" class="example-link">→ 例2</a>
            <div class="formula">
                \[ s_{xy} = \frac{1}{n}\sum_{i=1}^{n}(x_i - \bar{x})(y_i - \bar{y}) = \overline{xy} - \bar{x}\bar{y} \]
            </div>
            <p><strong>共分散</strong>は、2つのデータ x と y の「一緒に動く度合い」を表す。</p>
            <ul>
                <li>共分散 > 0：xが大きいときyも大きい傾向（正の相関）</li>
                <li>共分散 < 0：xが大きいときyは小さい傾向（負の相関）</li>
                <li>共分散 ≈ 0：xとyに関係がない（無相関）</li>
            </ul>
        </div>

        <div class="rule-box" id="rule-corr">
            <strong>📌 ルール5：相関係数（correlation coefficient）</strong> <a href="#ex-corr" class="example-link">→ 例2</a>
            <div class="formula">
                \[ r = \frac{s_{xy}}{s_x \cdot s_y} = \frac{\text{共分散}}{\text{xの標準偏差} \times \text{yの標準偏差}} \]
            </div>
            <p><strong>相関係数</strong> r は、共分散を標準偏差で割って「−1から1」の範囲に標準化した値。</p>
            <ul>
                <li>\(r = 1\)：完全な正の相関（すべての点が右上がりの直線上）</li>
                <li>\(r = -1\)：完全な負の相関（すべての点が右下がりの直線上）</li>
                <li>\(r = 0\)：無相関（直線的な関係がない）</li>
            </ul>
            <p><strong>→ だから結果は：</strong> |r| が1に近いほど強い相関、0に近いほど弱い相関</p>

            <table class="material-table">
                <tr>
                    <th>|r| の値</th>
                    <th>相関の強さ</th>
                </tr>
                <tr>
                    <td>0.7 ≤ |r| ≤ 1</td>
                    <td>強い相関</td>
                </tr>
                <tr>
                    <td>0.4 ≤ |r| < 0.7</td>
                    <td>中程度の相関</td>
                </tr>
                <tr>
                    <td>0.2 ≤ |r| < 0.4</td>
                    <td>弱い相関</td>
                </tr>
                <tr>
                    <td>0 ≤ |r| < 0.2</td>
                    <td>ほぼ無相関</td>
                </tr>
            </table>
        </div>

        <div class="rule-box" id="rule-transform">
            <strong>📌 ルール6：データの変換と分散・標準偏差</strong>
            <p>データを \(y = ax + b\) で変換したとき：</p>
            <div class="formula">
                \[ \bar{y} = a\bar{x} + b, \quad s_y = |a| \cdot s_x, \quad s_y^2 = a^2 \cdot s_x^2 \]
            </div>
            <p><strong>→ だから結果は：</strong></p>
            <ul>
                <li>平均：a倍してbを足す（定数項も影響）</li>
                <li>標準偏差：|a|倍する（定数項は影響しない）</li>
                <li>分散：a²倍する（定数項は影響しない）</li>
            </ul>
        </div>
    </div>
</section>

<!-- ========== 3. 例題と解き方 ========== -->
<section id="section3">
    <h2>3. 例題と解き方</h2>
    <div class="section">
        <p>分散・標準偏差・相関係数を実際に計算してみましょう。</p>

        <h3 style="color: #1976d2; margin: 15px 0 10px 0;">▶ 分散と標準偏差を求める</h3>

        <div class="example-box" id="ex-variance">
            <div class="example-title">
                <span class="number-badge">例1</span>分散と標準偏差の計算
            </div>
            <p>データ 2, 4, 6, 8, 10 の分散と標準偏差を求めよ。</p>
            <p><strong>解き方：</strong></p>
            <ol>
                <li>平均を求める：\(\bar{x} = \dfrac{2+4+6+8+10}{5} = \dfrac{30}{5} = 6\)</li>
                <li>各データの偏差（データ − 平均）を求める：−4, −2, 0, 2, 4</li>
                <li>偏差の2乗を求める：16, 4, 0, 4, 16</li>
                <li>偏差の2乗の平均が分散：\(s^2 = \dfrac{16+4+0+4+16}{5} = \dfrac{40}{5} = 8\)</li>
                <li>分散の平方根が標準偏差：\(s = \sqrt{8} = 2\sqrt{2}\)</li>
            </ol>
            <div class="formula">
                \[ s^2 = 8, \quad s = 2\sqrt{2} \approx 2.83 \]
            </div>
            <p><strong>別解（計算公式を使う）：</strong></p>
            <ol>
                <li>\(\overline{x^2} = \dfrac{4+16+36+64+100}{5} = \dfrac{220}{5} = 44\)</li>
                <li>\(\bar{x}^2 = 6^2 = 36\)</li>
                <li>\(s^2 = \overline{x^2} - \bar{x}^2 = 44 - 36 = 8\)　✓</li>
            </ol>
        </div>

        <h3 style="color: #9c27b0; margin: 25px 0 10px 0;">▶ 相関係数を求める</h3>

        <div class="example-box" id="ex-corr">
            <div class="example-title">
                <span class="number-badge">例2</span>相関係数の計算
            </div>
            <p>次のデータについて、xとyの相関係数を求めよ。</p>
            <table class="material-table">
                <tr>
                    <th>x</th>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                </tr>
                <tr>
                    <th>y</th>
                    <td>2</td>
                    <td>5</td>
                    <td>4</td>
                    <td>7</td>
                    <td>7</td>
                </tr>
            </table>
            <p><strong>解き方：</strong></p>
            <ol>
                <li>平均を求める：\(\bar{x} = 3\)、\(\bar{y} = 5\)</li>
                <li>各種の2乗・積の平均を求める：
                    <ul>
                        <li>\(\overline{x^2} = \dfrac{1+4+9+16+25}{5} = 11\)</li>
                        <li>\(\overline{y^2} = \dfrac{4+25+16+49+49}{5} = \dfrac{143}{5} = 28.6\)</li>
                        <li>\(\overline{xy} = \dfrac{2+10+12+28+35}{5} = \dfrac{87}{5} = 17.4\)</li>
                    </ul>
                </li>
                <li>分散・共分散を求める：
                    <ul>
                        <li>\(s_x^2 = 11 - 9 = 2\)　→　\(s_x = \sqrt{2}\)</li>
                        <li>\(s_y^2 = 28.6 - 25 = 3.6\)　→　\(s_y = \sqrt{3.6}\)</li>
                        <li>\(s_{xy} = 17.4 - 15 = 2.4\)</li>
                    </ul>
                </li>
                <li>相関係数を求める：\(r = \dfrac{s_{xy}}{s_x \cdot s_y} = \dfrac{2.4}{\sqrt{2} \cdot \sqrt{3.6}} = \dfrac{2.4}{\sqrt{7.2}}\)</li>
            </ol>
            <div class="formula">
                \[ r = \frac{2.4}{\sqrt{7.2}} = \frac{2.4}{2.683...} \approx 0.894 \]
            </div>
            <p>r ≈ 0.89 は強い正の相関を示す。</p>
        </div>

        <h3 style="color: #4caf50; margin: 25px 0 10px 0;">▶ データの変換</h3>

        <div class="example-box" id="ex-transform">
            <div class="example-title">
                <span class="number-badge">例3</span>データ変換後の平均と分散
            </div>
            <p>データ x の平均が 50、標準偏差が 10 のとき、y = 2x + 30 で変換した新しいデータ y の平均と標準偏差を求めよ。</p>
            <p><strong>解き方：</strong></p>
            <ol>
                <li>平均：\(\bar{y} = 2 \cdot 50 + 30 = 130\)</li>
                <li>標準偏差：\(s_y = |2| \cdot 10 = 20\)</li>
            </ol>
            <div class="formula">
                \[ \bar{y} = 130, \quad s_y = 20 \]
            </div>
            <p>※ 定数項 +30 は平均にだけ影響し、標準偏差には影響しない</p>
        </div>

        <h3 style="color: #e53935; margin: 25px 0 10px 0;">▶ 散布図から相関を読み取る</h3>

        <div class="example-box" id="ex-scatter">
            <div class="example-title">
                <span class="number-badge">例4</span>散布図の読み取り
            </div>
            <p>下の散布図から、相関係数として最も適切なものを選べ。</p>
            <div class="svg-container">
                <svg width="250" height="200" viewBox="0 0 250 200">
                    <rect x="30" y="20" width="200" height="160" fill="#f5f5f5" stroke="#333" stroke-width="1"/>
                    <line x1="30" y1="180" x2="230" y2="180" stroke="#333" stroke-width="1"/>
                    <line x1="30" y1="180" x2="30" y2="20" stroke="#333" stroke-width="1"/>
                    <text x="130" y="198" font-size="12" fill="#333" text-anchor="middle">x</text>
                    <text x="15" y="100" font-size="12" fill="#333" text-anchor="middle">y</text>

                    <!-- 緩やかな右上がりの点 -->
                    <circle cx="50" cy="150" r="4" fill="#1976d2"/>
                    <circle cx="70" cy="160" r="4" fill="#1976d2"/>
                    <circle cx="90" cy="130" r="4" fill="#1976d2"/>
                    <circle cx="110" cy="110" r="4" fill="#1976d2"/>
                    <circle cx="120" cy="140" r="4" fill="#1976d2"/>
                    <circle cx="140" cy="90" r="4" fill="#1976d2"/>
                    <circle cx="160" cy="100" r="4" fill="#1976d2"/>
                    <circle cx="170" cy="70" r="4" fill="#1976d2"/>
                    <circle cx="190" cy="80" r="4" fill="#1976d2"/>
                    <circle cx="210" cy="50" r="4" fill="#1976d2"/>
                </svg>
                <div class="svg-caption">散布図A</div>
            </div>
            <p>選択肢：① r = 0.9　② r = 0.5　③ r = 0　④ r = −0.5</p>
            <p><strong>解き方：</strong></p>
            <ol>
                <li>点が右上がりの傾向 → 正の相関（r > 0）→ ③④は除外</li>
                <li>点が直線に完全に乗ってはいないが、かなり強い傾向 → 中〜強の相関</li>
                <li>点のばらつきがある程度あるので、r = 0.9 ほど強くはない</li>
            </ol>
            <p><strong>答え：</strong> ② r = 0.5（または①との間くらい）</p>
        </div>
    </div>
</section>

<!-- ========== 4. 簡単にするコツ ========== -->
<section id="section4">
    <h2>4. 簡単にするコツ</h2>
    <div class="section">
        <div class="tip-box" id="tip-calc-formula">
            <strong>✏️ コツ1：計算公式を使う</strong><br>
            分散は「\(\overline{x^2} - \bar{x}^2\)」（2乗の平均 − 平均の2乗）で計算すると楽。<br>
            共分散は「\(\overline{xy} - \bar{x}\bar{y}\)」（積の平均 − 平均の積）で計算する。
        </div>

        <div class="tip-box" id="tip-table">
            <strong>✏️ コツ2：表を作って整理する</strong><br>
            データ、偏差、偏差の2乗などを表にまとめると、計算ミスが減る。
            <table class="material-table" style="margin-top: 10px;">
                <tr>
                    <th>x</th>
                    <th>x − 平均</th>
                    <th>(x − 平均)²</th>
                </tr>
                <tr>
                    <td>データ1</td>
                    <td>偏差1</td>
                    <td>偏差²</td>
                </tr>
                <tr>
                    <td>...</td>
                    <td>...</td>
                    <td>...</td>
                </tr>
                <tr>
                    <td><strong>合計</strong></td>
                    <td>（必ず0）</td>
                    <td>Σ(偏差²)</td>
                </tr>
            </table>
        </div>

        <div class="tip-box" id="tip-deviation-sum-zero">
            <strong>✏️ コツ3：偏差の合計は必ず0になる</strong><br>
            偏差の合計が0にならなければ、どこかで計算ミスがある。検算に使おう。
        </div>

        <div class="tip-box" id="tip-corr-range">
            <strong>✏️ コツ4：相関係数は −1 ≤ r ≤ 1</strong><br>
            計算結果が1を超えたり−1より小さくなったら、どこかで間違えている。
        </div>
    </div>
</section>

<!-- ========== 5. よくあるつまづき ========== -->
<section id="section5">
    <h2>5. よくあるつまづき</h2>
    <div class="section">
        <div class="caution-box">
            <div class="caution-title">⚠️ つまづき1：分散と標準偏差を混同する</div>
            <p><strong>ダメな例：</strong> 分散を求めたのに標準偏差として答える</p>
            <p><strong>対策：</strong> 分散 s² は「偏差の2乗の平均」、標準偏差 s は「√分散」。問題文で何を求められているか確認。</p>
        </div>

        <div class="caution-box">
            <div class="caution-title">⚠️ つまづき2：計算公式の符号を間違える</div>
            <p><strong>ダメな例：</strong> \(s^2 = \bar{x}^2 - \overline{x^2}\) としてしまう</p>
            <p><strong>対策：</strong> 正しくは「2乗の平均 − 平均の2乗」。語呂で「2平マイ平2」と覚える。</p>
        </div>

        <div class="caution-box">
            <div class="caution-title">⚠️ つまづき3：相関と因果を混同する</div>
            <p><strong>ダメな例：</strong> 「アイスの売上と水難事故に正の相関がある」→「アイスが事故の原因」と結論</p>
            <p><strong>対策：</strong> 相関は「一緒に動く傾向」を示すだけ。両方とも「気温」という第三の要因で説明できる。相関≠因果！</p>
        </div>

        <div class="caution-box">
            <div class="caution-title">⚠️ つまづき4：データ変換で定数項を標準偏差に影響させる</div>
            <p><strong>ダメな例：</strong> y = 2x + 10 で変換したとき、標準偏差も +10 される</p>
            <p><strong>対策：</strong> 定数項は平均だけに影響する。標準偏差は係数（この場合2）の絶対値倍になるだけ。</p>
        </div>
    </div>
</section>

<!-- ========== 6. 仕上げチェックリスト ========== -->
<section id="section6">
    <h2>6. 仕上げチェックリスト</h2>
    <div class="section">
        <div class="checklist">
            <div class="checklist-item">偏差の合計が0になっているか確認したか</div>
            <div class="checklist-item">分散と標準偏差を間違えていないか</div>
            <div class="checklist-item">相関係数が −1 ≤ r ≤ 1 の範囲に入っているか</div>
            <div class="checklist-item">計算公式の符号（2乗の平均 − 平均の2乗）を間違えていないか</div>
            <div class="checklist-item">単位を意識しているか（標準偏差は元のデータと同じ単位）</div>
        </div>
    </div>
</section>

<!-- ========== 7. 練習問題 ========== -->
<section id="section7">
    <h2>7. 練習問題</h2>
    <div class="section">
        <p>学んだことを使って、以下の問題を解いてみよう。</p>

        <div class="rule-box" style="background: #f5f5f5;">
            <strong>練習1</strong>
            <p>データ 3, 5, 7, 9, 11 の平均、分散、標準偏差を求めよ。</p>
            <details style="margin-top: 15px;">
                <summary style="cursor: pointer; color: #4caf50; font-weight: bold;">答えを見る</summary>
                <div style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 5px;">
                    <p>平均：\(\bar{x} = \dfrac{3+5+7+9+11}{5} = 7\)</p>
                    <p>偏差：−4, −2, 0, 2, 4　→　偏差²：16, 4, 0, 4, 16</p>
                    <p>分散：\(s^2 = \dfrac{40}{5} = \boxed{8}\)</p>
                    <p>標準偏差：\(s = \sqrt{8} = \boxed{2\sqrt{2}}\)（≈ 2.83）</p>
                </div>
            </details>
        </div>

        <div class="rule-box" style="background: #f5f5f5; margin-top: 15px;">
            <strong>練習2</strong>
            <p>xとyのデータが以下の表で与えられるとき、共分散と相関係数を求めよ。ただし、\(s_x = 2\)、\(s_y = 3\) とする。</p>
            <table class="material-table" style="margin: 10px 0;">
                <tr><th>x</th><td>1</td><td>3</td><td>5</td><td>7</td><td>9</td></tr>
                <tr><th>y</th><td>8</td><td>5</td><td>6</td><td>2</td><td>4</td></tr>
            </table>
            <details style="margin-top: 15px;">
                <summary style="cursor: pointer; color: #4caf50; font-weight: bold;">答えを見る</summary>
                <div style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 5px;">
                    <p>\(\bar{x} = 5\)、\(\bar{y} = 5\)</p>
                    <p>\(\overline{xy} = \dfrac{8+15+30+14+36}{5} = \dfrac{103}{5} = 20.6\)</p>
                    <p>共分散：\(s_{xy} = 20.6 - 25 = -4.4\)</p>
                    <p>相関係数：\(r = \dfrac{-4.4}{2 \times 3} = \dfrac{-4.4}{6} \approx \boxed{-0.73}\)</p>
                    <p>（負の相関：xが大きいとyは小さい傾向）</p>
                </div>
            </details>
        </div>
    </div>
</section>

<!-- ========== まとめ ========== -->
<div class="summary">
    📌 まとめ：分散 = 偏差²の平均、標準偏差 = √分散、相関係数は −1 から 1 で関係の強さを表す！
</div>

<!-- ========== おまけ：数学雑学 ========== -->
<section id="story">
    <h2>おまけ：数学雑学「平均年収のウソ」</h2>
    <div class="section">
        <div class="story-box">
            <div class="story-title">💰 なぜ「平均以下」の人が7割もいるのか</div>

            <p>「日本人の平均年収は約460万円」というニュースを見たことがあるだろう。</p>

            <p>さて問題。平均年収が460万円なら、<strong>年収460万円以下の人は何割</strong>くらいいると思う？</p>

            <p>「半分くらい？」と思うかもしれない。でも正解は...<strong>約7割</strong>だ！</p>

            <p>「えっ、平均なのに7割が下回るの？」</p>

            <p>これが<strong>「平均」のトリック</strong>だ。</p>

            <p>年収のデータは、少数の超高所得者（年収数億円とか）に引っ張られて、平均が高くなる。こういうデータを<strong>「右に裾が長い分布」</strong>という。</p>

            <div class="formula">
                \[ \text{平均} > \text{中央値}（右に裾が長いとき） \]
            </div>

            <p>実は、年収の<strong>中央値</strong>（ちょうど真ん中の人の年収）は約350万円。平均より100万円以上低い！</p>

            <p>「みんなの真ん中」を知りたいなら、平均より<strong>中央値</strong>を見るべきなのだ。</p>

            <p>ちなみに、データの散らばりを見る<strong>標準偏差</strong>も重要。「平均年収460万円、標準偏差300万円」なら、年収160万円〜760万円の間に約68%の人がいることになる。散らばりを見れば「平均はこれだけど、実態はこう」がわかる。</p>

            <p style="font-style: italic; color: #666; margin-top: 20px;">...統計は使い方次第で印象操作できる。「平均」と聞いたら「中央値は？」「分布の形は？」と疑う目を持とう。これが統計リテラシーだ。</p>
        </div>
    </div>
</section>
